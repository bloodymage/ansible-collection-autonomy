- hosts: all
  pre_tasks:
    - name: Create groups based on the OS
      group_by:
        key: "{{ ansible_network_os.split('.')[2] | lower }}"
      when:
        - ansible_network_os is defined

- hosts: dns_servers:!public_zone
  roles:
    - bloodymage.rebeldream.bind

- hosts: all:!localhost
  ignore_unreachable: yes
  roles:
    - bloodymage.rebeldream.dns_forwardzones

# TODO: Configure RouterOS reversezones
- hosts: all:!localhost:!routeros
  ignore_unreachable: yes
  roles:
    - bloodymage.rebeldream.dns_reversezones
