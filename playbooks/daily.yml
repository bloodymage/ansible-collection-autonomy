- hosts: all
  pre_tasks:
    - name: Create groups based on the OS
      group_by:
        key: "{{ ansible_network_os.split('.')[2] | lower }}"
      when:
        - ansible_network_os is defined
        
- hosts: all:!localhost
  ignore_unreachable: true
  roles:
    - role: bloodymage.rebeldream.dns_forwardzones

- hosts: all:!localhost:!routeros
  ignore_unreachable: true
  roles:
    - role: bloodymage.rebeldream.dns_reversezones

- hosts: all:!localhost
  roles:
    - role: bloodymage.rebeldream.system_upgrade
    - role: bloodymage.rebeldream.dotfiles
