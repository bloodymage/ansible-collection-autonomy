---
# This playbook contains common plays that will be run on all debian family of nodes.
- name: Install minimum packages for ansible
  package:
    name: "{{ packages }}"
    state: present
  become: yes

# ==================================================================================================
#
# Task:
#
#
#
# ==================================================================================================
- name: "{{ ansible_os_family }}: Print Variables"
  debug:
    msg:
      - "Hostname: {{ inventory_hostname }}"
    verbosity: 2
  tags:
    - basic_config


# ==================================================================================================
#
# Task: "Set proper hosts file"
#
# Installs a hostfile that replaces the '127.0.0.# hostname' with the
# hosts actual IP address and adds the fqdn
#
# ==================================================================================================
- name: "{{ ansible_os_family }}: Set proper hosts file"
  template:
    src: "{{ role_path }}/templates/hosts.j2"
    dest: /etc/hosts
    owner: root
    group: root
    mode: '0644'
  become: yes
  when:
    - inventory_hostname != 'localhost'
  tags:
    - basic_config
