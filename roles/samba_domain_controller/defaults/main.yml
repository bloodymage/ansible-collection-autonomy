packages:
  - acl
  - attr
  - samba
  - samba-dsdb-modules
  - samba-vfs-modules
  - winbind
  - libpam-winbind
  - libnss-winbind
  - libpam-krb5
  - krb5-config
  - krb5-user
  - dnsutils
  - unison
  - rsync

samba_domain_password_expiration: 90
samba_dns_backend: "BIND9_DLZ"

samba_schema_extensions:
  - name: sshpubkey
    dn: "CN=sshPublicKey,{{ rebeldream_schema_dn }}"
    change_type: "add"
    object_class: "top"
    object_class_detail: "attributeSchema"
    attribute_id: "1.3.6.1.4.1.24552.500.1.1.1.13"
    cn: "sshPublicKey"
    schema_name: "sshPublicKey"
    ldap_display_name: "sshPublicKey"
    description: "MANDATORY: OpenSSH Public key"
    attribute_syntax: "2.5.5.10"
    om_syntax: "4"
    single_valued: "FALSE"
    object_category: "cn=attribute-schema,{{ rebeldream_schema_dn }}"
    search_flags: "8"
    schema_id_guid: ": cjdazyexzu+/aki0egdw+g=="
  - name: ldappubkey
    dn: "cn=ldapPublicKey,{{ rebeldream_schema_dn }}"
    change_type: "add"
    object_class: "top"
    object_class_detail: "classschema"
    governs_id: "1.3.6.1.4.1.24552.500.1.1.2.0"
    cn: "ldapPublicKey"
    schema_name: "ldapPublicKey"
    ldap_display_name: "ldapPublicKey"
    description: "mandatory: openssh lpk objectclass"
    sub_class_of: "top"
    object_class_category: "3"
    object_category: "cn=class-schema,{{ rebeldream_schema_dn }}"
    default_object_category: "cn=ldapPublicKey,{{ rebeldream_schema_dn }}"
    may_contain: "sshPublicKey"
    schema_id_guid: ": +8nfq43rpkwtogbcccskqa=="
  - name: sshldapmod
    dn: "cn=user,{{ rebeldream_schema_dn }}"
    change_type: "modify"
    replace: "auxiliaryClass"
    auxiliary_class:
      - "ldapPublicKey"


__samba_recreate_realm: no
__samba_schema_master: "{{ groups['samba_domain_controllers'][0] }}"


