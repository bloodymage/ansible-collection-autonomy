---
ownca_domain_list: "{{ sovereign_domain_list }}"
ownca_domain: "{{ sovereign_domain_list | join('_') }}"

# Location Information
ownca_country_code: US

# Files and Directories
ownca_directory: "~/.pki/certificate_authorities"
ownca_format: 'pem'
ownca_etc: "/etc/ssl"

# URLs
pki_url: "pki.{{ ansible_domain }}"
ocsp_url: "ocsp.{{ ansible_domain }}"
crl_distribution_point: "https://{{ pki_url }}"

# Key Specific
ownca_type: RSA
ownca_sn: 8

ownca_intermediate_ca: "{{ sovereign_org_unit_name | lower }}"

ownca_certificate_authorities:
  - name: "root"
    common_name: "{{ sovereign_org_name | title }} {{ 'root' | title }} CA"
    password: "{{ ownca_root_password }}"
    organizational_name: "{{ sovereign_org_name }}"
    country_name: "{{ ownca_country_code }}"
    keyusage:
      - "keyCertSign"
      - "cRLSign"
    keyusage_critical: yes
    basic_constraints:
      - 'CA:TRUE'
    basic_constraints_critical: yes
    authority_key_identifier: "keyid:always"
    ownca: "root"
    ownca_privatekey_passphrase: "{{ ownca_root_password }}"
    provider: "selfsigned"
  - name: "{{ ownca_intermediate_ca }}"
    common_name: "{{ sovereign_org_name | title }} {{ ownca_intermediate_ca | title }} CA"
    organizational_name: "{{ sovereign_org_name | title }}"
    organizational_unit_name: "{{ sovereign_org_name | title }} {{ ownca_intermediate_ca | title }} CA"
    country_name: "{{ ownca_country_code }}"
    password: "{{ ownca_intermediate_password }}"
    ownca: "root"
    ownca_privatekey_passphrase: "{{ ownca_root_password }}"
    provider: "ownca"
    keyusage:
    - keyCertSign
    - cRLSign
    keyusage_critical: yes
    basic_constraints:
      - 'CA:TRUE'
  - name: "{{ ownca_intermediate_ca }}-component"
    common_name: "{{ sovereign_org_name | title }} {{ ownca_intermediate_ca | title}} Component CA"
    country_name: "{{ ownca_country_code }}"
    organizational_name: "{{ sovereign_org_name | title }}"
    organizational_unit_name: "{{ sovereign_org_name | title }} {{ ownca_intermediate_ca | title }} Component CA"
    password: "{{ ownca_component_password }}"
    ownca: "{{ ownca_intermediate_ca }}"
    ownca_privatekey_passphrase: "{{ ownca_intermediate_password }}"
    provider: "ownca"
    keyusage:
    - keyCertSign
    - cRLSign
    keyusage_critical: yes
    basic_constraints:
      - 'CA:TRUE'
  - name: "{{ ownca_intermediate_ca }}-identity"
    common_name: "{{ sovereign_org_name | title }} {{ ownca_intermediate_ca | title }} Identity CA"
    country_name: "{{ ownca_country_code }}"
    organizational_name: "{{ sovereign_org_name | title }}"
    organizational_unit_name: "{{ sovereign_org_name | title }} {{ ownca_intermediate_ca | title }} Identity CA"
    password: "{{ ownca_identity_password }}"
    ownca: "{{ ownca_intermediate_ca }}"
    ownca_privatekey_passphrase: "{{ ownca_intermediate_password }}"
    provider: "ownca"
    keyusage:
    - keyCertSign
    - cRLSign
    keyusage_critical: yes
    basic_constraints:
      - 'CA:TRUE'
  - name: "{{ ownca_intermediate_ca }}-codesign"
    common_name: "{{ sovereign_org_name | title }} {{ ownca_intermediate_ca | title }} Codesign CA"
    country_name: "{{ ownca_country_code }}"
    organizational_name: "{{ sovereign_org_name | title }}"
    organizational_unit_name: "{{ sovereign_org_name | title }} {{ ownca_intermediate_ca | title }} Codesign CA"
    password: "{{ ownca_codesign_password }}"
    ownca: "{{ ownca_intermediate_ca }}"
    ownca_privatekey_passphrase: "{{ ownca_intermediate_password }}"
    provider: "ownca"
    keyusage:
    - keyCertSign
    - cRLSign
    keyusage_critical: yes
    basic_constraints:
      - 'CA:TRUE'

ownca_revoked_certificates: []
